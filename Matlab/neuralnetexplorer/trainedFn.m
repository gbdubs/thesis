function [y1] = trainedFn(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 01-Mar-2016 10:27:30.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx25 matrix, input #1
% and returns:
%   y = Qx25 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_remove = [1 7 13 19 25];
x1_step1_keep = [2 3 4 5 6 8 9 10 11 12 14 15 16 17 18 20 21 22 23 24];
x1_step2_xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step2_gain = [2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2];
x1_step2_ymin = -1;

% Layer 1
b1 = [-2.6836117507784327252;0.067627150467812896517;-0.39542580062051174705;0.783417159688689968;0.098213460113255823813;0.14032789081928395691;-0.25795573747656852515;0.3945422628144635846;-1.4424326135419165418;1.7484080430441926168];
IW1_1 = [0.28396173643968536382 0.14826939004749656315 0.36335459966180050362 0.26235576555043138569 -0.029811261191799817705 0.53308261337652651513 -0.48029900802027764017 0.60306360893192179073 -0.088523496193364914486 0.29725483878227365597 -0.53301595043896443649 -0.56662375727503699885 -0.28484673481443428811 0.37236446733751704663 0.34135576121025396068 0.60591501414451243157 0.44114214260196604744 0.6110869816839091806 -0.65655502324871528597 -0.25032185769417741872;-0.11284511240315754643 0.013622893514793080194 0.078045675004177805789 -0.13866797718066437017 0.080513799589682591429 -0.39898642598614370014 0.15792357645549848222 -0.15075108137345771819 -0.039958339970106976358 0.36798570995334833889 -0.11354718232204306927 0.25107813461650740905 -0.12771747853575105003 -0.19115801794912656852 0.063961825352235657238 -0.54768143214685016673 0.094853286521258364794 0.10696621443510211102 -0.28737486492318170539 0.50354653499592416654;0.25078556653675609933 0.18559982442103525879 0.1460100667119762774 0.30286639223737366056 0.1846824685762756546 -0.11293088129892051019 0.50649770231580104607 0.17629242930316663118 0.14121884211014604227 0.39780643498432249894 -0.28130745101636656091 0.47017665628913496434 -0.19820145960560389686 -0.38486017222810120497 0.029509832720624476488 0.0234177753070401104 -0.02163218234125275849 -0.11170744648236755059 -0.39926229254706419036 -0.042061064851524408714;-0.043168187517920404705 -0.25137894618135603331 -0.43267508562865641952 0.036814908791153677647 -0.46136259450042710339 0.29591604458546039158 -0.27044736333875479817 -0.5106407190541963903 0.33190345797350484514 0.49867220448656413012 0.0067143427109581828305 0.20498801959607326761 0.0095290325267034133028 -0.48537741764389641386 0.026858348904285997416 -0.3115227102946825366 -0.38163741963501057741 0.2294222471407081354 -0.24054337524988764208 -0.04012728756483207454;-0.091684068877504618089 -0.28591770290902074336 -0.69230874298774214282 -0.50868631159421240362 0.089452931850741171371 0.2164505477964711877 0.15499818844575943833 0.29767185460795014817 -0.11166567234621810334 -0.5867715892520071197 0.15281466296403789507 -0.25719360223116682906 -0.19958334294366386619 -0.37883593714112562267 -0.59782965691394318597 0.36062780092544238775 0.29158585343998227879 -0.33160083513228910679 0.7069217074832940817 0.36572597695251546357;0.3210438818821534368 0.44912784315057319162 -0.30000531969362131957 -0.15077200892683573219 -0.35805717112651463951 0.49262070765723525723 0.41146776075619817536 -0.057598839735663903694 0.29868226842438955204 -0.063507894474270465413 -0.048248391228045139911 -0.0055662487731708469932 0.4842093670275059436 -0.15630366394471240099 -0.066138243430152524049 0.44092137625283206459 -0.10113330394206851426 -0.037416861147287629186 -0.10947756186849888493 -0.63241351755564778614;-0.17632957731121950973 0.39110947735591666818 -0.20575462721211046357 0.1293234889094554696 -0.081605819418942501797 -0.05720423142224907026 0.083830748794987558492 0.023777895712254797089 -0.35500134405701766482 0.1872623665209812438 -0.3170980909985242624 -0.18807641203843958322 0.066860886825154577928 -0.14911248292531348314 -0.31879172415383100203 -0.45132933660476842741 -0.17788176066056018976 -0.48381855694158282244 0.012304046283449811272 0.32160674361045782366;0.26589136499830795524 -0.3804280794623405848 -0.3248075224833578134 0.13580936868235887749 -0.33138581055014770804 0.02024241599168877595 -0.19437578821242906812 0.21073738376758638369 0.24337015408356899027 -0.28541917555602558387 -0.22428729053723803211 0.47372805896455066899 -0.60071866514412564086 0.29105661618965755766 0.39050220827024606507 -0.49745212329233445825 -0.52455977383863294783 -0.5038375140363290372 0.59748350790743520733 0.45437666940825077733;-0.47950526872600857109 -0.095781920654090274558 0.12473350277812783604 -0.54517488834184935076 0.45135930169080806795 -0.23555942733346474371 0.27367121913167558045 0.362087801684882582 -0.54478395759558673195 0.45837574501763683754 -0.49418213749141998159 -0.4119154522307552635 -0.37150130064541275754 0.60914628352195188121 0.35050116770705835867 0.49144343459843631283 0.18475278577416034964 -0.21161414720491114605 -0.32854426824867899448 0.73462664910348951519;0.6693511718773454966 0.19906222047787530682 0.38916758892958719374 -0.14645878279025065227 0.17496780808712594779 -0.27388781274011470002 -0.68338785820858660713 -0.061772592472827680954 -0.66107028210193385931 -0.11082976936484996433 0.62470547700500811406 -0.40131923599175761685 -0.26688212905171115885 -0.21108307277924251433 0.039333893124952973297 0.22402604811051948785 -0.07469627685958049601 0.16047000096861691043 -0.45793940913146036209 -0.28961037763670943734];

% Layer 2
b2 = [0.89453223959597460979;0.38656080294472222603;0.99248242691303423246;0.030213923613315589456;0.33747601287256856484;-1.0206548395946291041;0.12677702174381666467;-0.65195226173855957974;-1.0009176659036940205;0.038512860458474816594;-0.34202193725678586844;-1.0595913274735870857;0.96629052262242631777;0.32345128505434483923;-0.23339469344421542862;1.2101130979116530018;1.3121100278262625149;-1.0179564664662932305;1.3315210128418808466;0.64380811537626936314];
LW2_1 = [-0.17126882989402467117 -3.6723493481417484041 0.64933809277656906467 -0.94425864901638278948 -1.1195088209410719582 -0.55677654997231751377 1.3080171963541031843 0.7103702715067983231 0.095350429042004913871 0.094331860791842678249;0.063495863860369192166 -1.379226453667952379 0.13107458390282539229 -0.69484902981855933835 0.68669486609503016528 0.30688604025698201783 -0.047320217725211416449 -0.29911902242504700977 -0.2453051995591404022 -0.84079081820113343859;0.8610443701173413622 -1.7230543086536707076 -1.4095684375747179473 0.36973351003093535283 -0.070024616533413325259 -0.52500582146838636888 -0.77274490543400442544 -0.82865663667872646592 0.3508996530475125275 -0.22697317173425973769;-1.2714957210280075639 -2.8608751344425531471 0.31144321242882694323 -0.16920595343462643823 -0.2933731929865554533 0.35689919800589786636 0.098316800214710273198 0.38007010018005243923 0.36442303910121731647 0.23029353696470264423;-0.44616010607594502879 -2.2888877747600955281 0.50073714842842742545 -0.28118496480555471573 -0.28262510484573127867 -0.34693896536905205474 0.9720939171440723392 0.26573251560190969123 0.084280641612735601731 -0.032861419207692900424;-0.58070708231286938261 -1.495968459146769014 -0.94844654986196264002 0.37385024443999609334 0.13314701662421132844 -0.4092727455907418932 -0.65450311659936877273 -0.77795206531141891659 0.15468929749188511935 -0.21086952119283328133;-0.17063610880028237671 -6.0361576345073819638 -0.39500536283192677622 0.5562004096750738924 -0.21592287812038818418 -0.31111664386110715608 1.0037515966907144538 -0.30400593539297326995 0.38041464706048411237 0.87634080108591883018;-0.96693532440492746538 -3.4293922744339626618 0.89436546393279325873 -0.32175354454239779578 0.80163394065591486726 1.3063467388961294002 0.47495474114077024241 0.21461843909989222756 -0.073567110882777522751 0.75687864794568626703;1.2236585735968479316 -1.8701701118760536424 -0.41942037113512337099 0.12677036807024272269 0.28127781226343723242 0.68911692359469767233 -0.32956380135395391129 -0.83862023493924098272 -1.0046233666657438111 -0.26931828558177550725;-0.13286965800207201083 -3.1902017840892975542 -0.60737561171313969588 0.82525130143557312579 0.45907972612022346359 -0.14385650959041054731 -0.76787959803455230201 -0.9737965254846817631 -0.050240412322277466783 -0.119773505781218495;-0.71484941727284079249 -1.3883081411620994405 1.1270481501791898005 0.29634063448892156156 1.0491858464299106402 0.5069269168619880972 -1.450921877304287122 -0.37617850252806667166 0.31511521707413853166 -0.61928828045831840754;0.25212061174838051869 -0.61011740114948131986 -0.720245717380311401 0.30177015639473681041 1.040674538729000842 1.159767879632217058 -1.1797630977044926137 -1.0171097454425661599 -0.52094922383001474042 0.18494226052971513008;1.256966446223042988 -4.6819157294151025894 0.25057522092448353268 -0.24353750493496106877 -1.7449360605343711139 -1.3751615902054279417 1.3382899590823009728 1.3257388829471619118 -0.029894022698202710187 0.69452210672427849847;0.18757429323189503401 0.035729814076170755832 0.12305471986075988688 0.022585556422300777368 -0.20189838164454865232 -0.56399854772104507372 -0.58195603582597832393 0.31105953003652436761 0.83536400676107191998 0.27476580078281492847;0.25070069927247723429 -1.8812056654559095037 0.28624253334085719702 0.26651450061803272362 0.048205142662467927173 0.12526426608651936023 -0.067822440764061200924 -0.00068402496478819961676 0.47219130643544771075 0.23481957382621504449;1.5982599166465070173 -3.3358407098826252657 -0.67777213804287894661 0.31789124690168374388 -0.17133436414541899917 0.60295310231887477848 0.83338159829978064597 0.64177273465625084281 -0.55234359549278755352 0.7200471058796023005;-0.15880276910934737478 -1.2955869229162635392 1.4142163370456579674 -0.10570459986486681336 -1.5710083316988616708 -0.95826203201491644279 0.045121998690482501004 1.7164994865157205961 0.47728900305716748242 -0.30831805456557964673;-1.5776852547197648402 -0.20769452899199208895 0.63677745142082797791 0.26532588321647737617 1.0827577306013755898 0.91397832334432882462 -1.0252127273177107369 -0.56143073321757142047 -0.26428304514777056777 -1.1707115434394501641;-0.094486976072362671708 -4.7325875080782795479 0.40602684232928021313 0.061650389937698668597 0.29257123320903172248 -0.30479098380073244012 0.6982405077773399249 0.18792644524690443886 -0.22051264152997282486 -0.23581080320405131689;0.45990505468771064601 -2.8177539322579954195 -0.053128309437091569833 -0.89584336588468171936 -0.3320782178334665824 0.51010706378936188088 -0.10914197128778709012 0.90773510884105879093 -0.53112541185219475093 -0.17793229977887775606];

% Output 1
y1_step2_ymin = -1;
y1_step2_gain = [2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2];
y1_step2_xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
y1_step1_xrows = 25;
y1_step1_remove = [1 7 13 19 25];
y1_step1_value = [0;0;0;0;0];
y1_step1_keep = [2 3 4 5 6 8 9 10 11 12 14 15 16 17 18 20 21 22 23 24];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = removeconstantrows_apply(x1,x1_step1_keep,x1_step1_remove);
xp1 = mapminmax_apply(xp1,x1_step2_gain,x1_step2_xoffset,x1_step2_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step2_gain,y1_step2_xoffset,y1_step2_ymin);
y1 = removeconstantrows_reverse(y1,y1_step1_keep,y1_step1_remove,y1_step1_value,y1_step1_xrows);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings_keep,settings_remove)
if isempty(settings_remove)
    y = x;
else
    y = x(settings_keep,:);
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings_keep,settings_remove,settings_value,settings_xrows)
Q = size(y,2);
x = zeros(settings_xrows,Q);
x(settings_remove,:) = settings_value(:,ones(1,Q));
x(settings_keep,:) = y;
end
